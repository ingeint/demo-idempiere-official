pipeline {
    agent none
    environment {
        IDEMPIERE_REPOSITORY = "/idempiere"

    }
    stages {
        stage('Build Artefact') {
            agent {
                docker {
                    image 'portus.ingeint.com/idempiere-source:8.2'
                    registryUrl 'https://portus.ingeint.com'
                    registryCredentialsId 'portus-ingeint'                 
                }
            }
            steps {

                sh 'ls /idempiere'
                
                archiveArtifacts artifacts: '/idempiere', fingerprint: true
                stash includes: '/idempiere', name: 'workspace'
            }
        }
    }
}
